<!DOCTYPE html>
<html>
<head>
	<title></title>
	<meta charset="utf-8">
	<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
	<meta name="viewport" content="width=device-width; initial-scale=1.0; maximum-scale=1.0;">
	<style type="text/css">
		/* DEBUG STYLES */
		table {
			/*border: 1px solid gray;*/
		}
		td {
			/*border: 1px solid gray;*/
		}


		* {
			font-family: Arial;
			padding: 0;
			margin: 0;
		}


		body {
			background: #f0f0f0;
		}


		table#main .avatar {
			min-width:	30px;
			min-height:	30px;
			max-width:	30px;
			max-height:	30px;
		}
		div#controls .avatar {
			min-width:	50px;
			min-height:	50px;
			max-width:	50px;
			max-height:	50px;
			margin: 5px;
		}

		.avatar {
			margin: 5px;
			border-radius: 5px;
		}
		.avatar.blue {
			background: #1191CE;
		}
		.avatar.red {
			background: #DA3B35;
		}
		.avatar.green {
			background: #84B73E;
		}
		.avatar.yellow {
			background: #EC9F01;
		}


		table#main {
			width: 100%;
			padding: 15px;
			margin-bottom: 350px;
		}
		table#main tr td:first-child {
			width: 10%;
			text-align: center;
		}
		table#main tr.score.selected {
			background: #ccc
		}
		table#main tr.score.selected td:first-child {
			border-top-left-radius: 5px;
			border-bottom-left-radius: 5px;
		}
		table#main tr.score.selected td:last-child {
			border-top-right-radius: 5px;
			border-bottom-right-radius: 5px;
		}
		table#main tr th p {
			background: #ddd;
			padding: 5px;
			border-radius: 5px;
			margin-top: 20px;
		}
		table#main tr.score {
			line-height: 40px;
		}


		div#controls {
			background: #aaa;
			position: fixed;
			bottom: 0;
			padding-bottom: 50px;
			width: 100%;
		}
		div#controls p {
			text-align: center;
			margin: 20px 0;
		}
		div#controls table {
			table-layout: fixed;
			margin-bottom: 10px;
			width: 100%;
		}
		div#controls .action-button {
			background: white;
			line-height: 50px;
			border: none;
			border-radius: 5px;
			margin: 0 	10px;
			font-weight: bold;
			font-size: 25px;
		}
		div#controls .action-button:hover {
			background: #ddd;
		}
		div#controls .avatar.selected {
			border: 5px solid #333;
			margin: 0;
		}
		.action-button.plus {
			color: #84B73E;
		}
		.action-button.minus {
			color: #DA3B35;
		}
		.action-button.clear {
			color: #333;
		}
	</style>
	<script type="text/javascript">
		var score = [[], [], [], []]
		var subjectNumbers = 0

		function addSubject() {
			for (i = 0; i < 4; ++i) {
				score[i]
			}

			var subjectNumber = subjectNumbers++

			var table = document.getElementById("main")

			var subjectHeader = document.createElement("tr")
			table.appendChild(subjectHeader)
			var td = document.createElement("th")
			td.setAttribute("colSpan", 5)
			subjectHeader.appendChild(td)
			var p = document.createElement("p")
			p.innerHTML = "Тема " + (subjectNumber+1)
			td.appendChild(p)

			for(question = 0; question < 5; ++question) {
				var tr = document.createElement("tr")
				tr.setAttribute("class", "score")
				tr.setAttribute("data-subject", subjectNumber)
				tr.setAttribute("data-question", question)
				tr.onclick = onRowClicked
				table.appendChild(tr)

				var td = document.createElement("td")
				tr.appendChild(td)
				td.innerHTML = (question + 1) * 10

				for(player = 0; player < 4; ++player) {
					var td = document.createElement("td")
					tr.appendChild(td)
				}
			}

			var totalRow = document.createElement("tr")
			totalRow.setAttribute("class", "score")
			table.appendChild(totalRow)
			var totalDescription = document.createElement("td")
			totalDescription.innerHTML = "Σ"
			totalRow.appendChild(totalDescription)

			for(player = 0; player < 4; ++player) {
				var td = document.createElement("td")
				totalRow.appendChild(td)
			}
		}

		function onRowClicked() {
			// console.log("clicked", this)

			var table = document.getElementById("table")

			var currentlySelectedTrs = document.getElementsByClassName("selected")
			for (i = 0; i < currentlySelectedTrs.length; ++i) {
				currentlySelectedTrs[i].setAttribute("class", "score")
			}

			var tr = this
			tr.setAttribute("class", "score selected")

			var subject = parseInt(tr.getAttribute("data-subject"))
			var question = parseInt(tr.getAttribute("data-question"))

			onCurrentQuestionChanged(subject, question)
		}

		function onActionAvatarClicked(element) {
			console.log("avatar selected", element)
			var avatar = element
			// avatar.setAttribute("class", avatar.getAttribute("class") + " selected")
		}

		function nextQuestion() {

		}

		function onCurrentQuestionChanged(subject, question) {
			var subjectName = (subject + 1)
			var questionName = (question + 1)*10

			var description = document.getElementById("current-question-description")
			description.innerHTML = "Тема " + subjectName + " — Вопрос за " + questionName

			var plusButton = document.getElementById("plus-button")
			plusButton.innerHTML = "+" + questionName

			var minusButton = document.getElementById("minus-button")
			minusButton.innerHTML = "−" + questionName
		}

		function test() {
			score[0][4] = -1
			score[0][6] = 1
			console.log(score)
			addSubject()
		}

		function assignRandomScores() {
			var scoreTrs = document.getElementsByClassName("score")

		}

		setTimeout(addSubject, 100)
		setTimeout(addSubject, 200)
		setTimeout(addSubject, 200)
		setTimeout(addSubject, 200)
		setTimeout(addSubject, 200)

		setTimeout(assignRandomScores, 200)
	</script>
</head>
<body>

	<button onclick="test()">Test</button>


	<table id="main" cellspacing="0">
		<tr>
			<td></td>
			<td align="center"><div class="avatar red"> </div><p>Игрок 1</p></td>
			<td align="center"><div class="avatar blue"> </div><p>Игрок 2</p></td>
			<td align="center"><div class="avatar yellow"> </div><p>Игрок 3</p></td>
			<td align="center"><div class="avatar green"> </div><p>Игрок 4</p></td>
		</tr>
	</table>

	<div id="controls">
		<p id="current-question-description">
			<!-- Тема 1 — Вопрос за 30 -->
		</p>

		<table>
			<tr>
				<td align="center"><div class="action-button">Дальше</div></td>
			</tr>
		</table>
		<table>
			<tr>
				<td align="center"><div class="action-button minus" id="minus-button">−30</div></td>
				<td align="center"><div class="action-button clear">0</div></td>
				<td align="center"><div class="action-button plus" id="plus-button">+30</div></td>
			</tr>
		</table>
		<table>
			<tr>
				<td align="center"><div onclick="onActionAvatarClicked(this)" class="avatar red"> </div></td>
				<td align="center"><div onclick="onActionAvatarClicked(this)" class="avatar blue"> </div></td>
				<td align="center"><div onclick="onActionAvatarClicked(this)" class="avatar yellow"> </div></td>
				<td align="center"><div onclick="onActionAvatarClicked(this)" class="avatar green"> </div></td>
			</tr>
		</table>
	</div>
</body>
</html>
























